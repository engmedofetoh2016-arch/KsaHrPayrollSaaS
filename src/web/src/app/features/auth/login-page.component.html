<section class="login-wrap">
  <button type="button" class="lang-switch" (click)="i18n.toggleLanguage()">
    <span class="lang-label">{{ i18n.text('Language', 'اللغة') }}</span>
    <span class="lang-value">{{ i18n.isArabic() ? 'English' : 'العربية' }}</span>
  </button>

  <div class="auth-nav card">
    <button type="button" class="nav-btn" [class.active]="!showForgot() && !showSignUp()" (click)="showLoginPanel()">
      {{ i18n.text('Login', 'تسجيل الدخول') }}
    </button>
    <button type="button" class="nav-btn" [class.active]="showForgot()" (click)="toggleForgotPassword()">
      {{ i18n.text('Forgot Password', 'استعادة كلمة المرور') }}
    </button>
    <button type="button" class="nav-btn" [class.active]="showSignUp()" (click)="toggleSignUp()">
      {{ i18n.text('Sign Up', 'تسجيل منشأة جديدة') }}
    </button>
  </div>

  @if (!showForgot() && !showSignUp()) {
    <form class="card" [formGroup]="form" (ngSubmit)="onSubmit()">
      <h1>{{ i18n.text('HR Payroll Login', 'الدخول إلى نظام إدارة الموارد البشرية') }}</h1>
      <p class="subtitle">{{ i18n.text('Secure access to your company payroll workspace.', 'وصول آمن إلى بيئة إدارة الرواتب في منشأتك.') }}</p>

      <label>
        {{ i18n.text('Tenant Slug', 'رمز المنشأة') }}
        <input id="tenantSlug" name="tenantSlug" formControlName="tenantSlug" [placeholder]="i18n.text('e.g. acme-ksa', 'مثال: acme-ksa')" />
      </label>

      <label>
        {{ i18n.text('Email', 'البريد الإلكتروني') }}
        <input id="email" name="email" type="email" formControlName="email" [placeholder]="i18n.text('owner@company.com', 'owner@company.com')" />
      </label>

      <label>
        {{ i18n.text('Password', 'كلمة المرور') }}
        <input id="password" name="password" type="password" formControlName="password" [placeholder]="i18n.text('********', '********')" />
      </label>
      <p class="hint">{{ i18n.text('Password must be at least 8 characters and include uppercase, lowercase, and a number.', 'يجب أن تتكون كلمة المرور من 8 أحرف على الأقل وتحتوي على حرف كبير وحرف صغير ورقم.') }}</p>

      @if (error()) {
        <p class="error">{{ error() }}</p>
      }

      <button type="submit" [disabled]="loading()">
        {{ loading() ? i18n.text('Signing in...', 'جاري تسجيل الدخول...') : i18n.text('Sign in', 'تسجيل الدخول') }}
      </button>
    </form>
  }

  @if (showForgot()) {
    <form class="card signup-card" [formGroup]="forgotForm" (ngSubmit)="onForgotSubmit()">
      <h2>{{ i18n.text('Forgot Password', 'استعادة كلمة المرور') }}</h2>
      <label>{{ i18n.text('Tenant Slug', 'رمز المنشأة') }} <input formControlName="tenantSlug" /></label>
      <label>{{ i18n.text('Email', 'البريد الإلكتروني') }} <input type="email" formControlName="email" /></label>

      @if (forgotError()) {
        <p class="error">{{ forgotError() }}</p>
      }
      @if (forgotMessage()) {
        <p class="ok">{{ forgotMessage() }}</p>
      }

      <button type="submit" [disabled]="forgotLoading()">
        {{ forgotLoading() ? i18n.text('Sending...', 'جاري الإرسال...') : i18n.text('Send Reset Link', 'إرسال رابط إعادة التعيين') }}
      </button>
    </form>
  }

  @if (showSignUp()) {
    <form class="card signup-card" [formGroup]="signupForm" (ngSubmit)="onSignUpSubmit()">
      <h2>{{ i18n.text('Sign Up', 'تسجيل منشأة جديدة') }}</h2>

      <label>{{ i18n.text('Tenant Name', 'اسم المنشأة') }} <input id="tenantName" name="tenantName" formControlName="tenantName" [placeholder]="i18n.text('Acme HR', 'شركة المثال للموارد البشرية')" /></label>
      <label>{{ i18n.text('Tenant Slug', 'رمز المنشأة') }} <input id="slug" name="slug" formControlName="slug" [placeholder]="i18n.text('acme-ksa', 'acme-ksa')" /></label>
      <label>{{ i18n.text('Company Legal Name', 'الاسم القانوني للمنشأة') }} <input id="companyLegalName" name="companyLegalName" formControlName="companyLegalName" [placeholder]="i18n.text('Acme LLC', 'شركة المثال المحدودة')" /></label>
      <label>{{ i18n.text('Currency', 'العملة') }} <input id="currencyCode" name="currencyCode" formControlName="currencyCode" [placeholder]="i18n.text('SAR', 'SAR')" /></label>
      <label>{{ i18n.text('Default Pay Day', 'يوم صرف الراتب الافتراضي') }} <input id="defaultPayDay" name="defaultPayDay" type="number" formControlName="defaultPayDay" min="1" max="31" /></label>
      <label>{{ i18n.text('Owner First Name', 'الاسم الأول لمالك الحساب') }} <input id="ownerFirstName" name="ownerFirstName" formControlName="ownerFirstName" /></label>
      <label>{{ i18n.text('Owner Last Name', 'اسم العائلة لمالك الحساب') }} <input id="ownerLastName" name="ownerLastName" formControlName="ownerLastName" /></label>
      <label>{{ i18n.text('Owner Email', 'البريد الإلكتروني لمالك الحساب') }} <input id="ownerEmail" name="ownerEmail" type="email" formControlName="ownerEmail" [placeholder]="i18n.text('owner@company.com', 'owner@company.com')" /></label>
      <label>{{ i18n.text('Owner Password', 'كلمة المرور لمالك الحساب') }} <input id="ownerPassword" name="ownerPassword" type="password" formControlName="ownerPassword" [placeholder]="i18n.text('********', '********')" /></label>
      <p class="hint">{{ i18n.text('Password must be at least 8 characters and include uppercase, lowercase, and a number.', 'يجب أن تتكون كلمة المرور من 8 أحرف على الأقل وتحتوي على حرف كبير وحرف صغير ورقم.') }}</p>

      @if (signupError()) {
        <p class="error">{{ signupError() }}</p>
      }

      @if (signupMessage()) {
        <p class="ok">{{ signupMessage() }}</p>
      }

      <button type="submit" [disabled]="signupLoading()">
        {{ signupLoading() ? i18n.text('Creating account...', 'جاري إنشاء الحساب...') : i18n.text('Sign Up', 'إنشاء الحساب') }}
      </button>
    </form>
  }
</section>
